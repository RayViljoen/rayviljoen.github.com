<!DOCTYPE html>
<html lang="en">
  <head><!--[if lt IE 9]>
    <script src="dist/html5shiv.js"></script><![endif]-->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <meta name="author" content="Ray Viljoen">
    <meta name="description" content="Start using all the new features of PHP 5.4 on your Mac.">
    <title>Updating PHP on Mac OS X</title>
    <link rel="alternate" href="http://rayviljoen.github.com/feed.xml" type="application/rss+xml">
    <link rel="stylesheet" href="/css/style.css">
  </head>
  <body>
    <div id="wrapper" class="clearfix">
      <header id="dash">
        <h1>
          <!-- Wrap last letter of title in span for style purposes--><a href="/"><span>R</span>Viljoen</a>
        </h1>
        <ul id="social" class="clearfix">
          <li class="feed"><a href="/feed.xml">Feed</a></li>
          <li class="github"><a href="https://github.com/RayViljoen">GitHub</a></li>
          <li class="email"><a href="mailto:rayviljoen@me.com">Email</a></li>
        </ul>
        <ul id="menu" class="clearfix">
          <li><a href="/archive/#PHP" class="PHP catAnchor">PHP</a></li>
          <li><a href="/archive/#OSX" class="OSX catAnchor">OSX</a></li>
          <li><a href="/archive/#JavaScript" class="JavaScript catAnchor">JavaScript</a></li>
          <li><a href="/archive/#NodeJS" class="NodeJS catAnchor">NodeJS</a></li>
        </ul><a href="/archive/" id="archive">Older entries</a>
      </header>
      <div id="content" class="clearfix">
        <article class="post open">
          <header>
            <h2>Updating PHP on Mac OS X</h2>
            <div class="post-meta clearfix">
              <div class="post-date">May 25th, 2011</div>
              <div class="post-categories"><a href="/archive/#PHP">PHP ,</a><a href="/archive/#OSX">OSX</a>
              </div>
            </div>
          </header><p>PHP 5.4 has been the first significant update for a while and brings with it some really nice <a href="http://php.net/manual/en/migration54.new-features.php">new features</a> such as traits, file upload progress, much nicer array syntax and my personal favourite, a built in web server. Unfortunately OS X still ships with version 5.3 and can be a bit of a challenge to upgrade, so here&apos;s a quick step by step guide to getting PHP on Mac OS X <em>- 10.7 Mountain Lion at the time of writing -</em> upgraded to the latest version.

</p>
<p><span class="more"></span>

</p>
<p>In order to build and install PHP form source you will need to install a few tools and dependancies, so first head over to the App Store and install the latest version of Xcode. Once Xcode is installed, open it&apos;s preferences and navigate to the downloads section to install the Command Line Tools.

</p>
<p><img src="/articles/upgrading-mac-php/xcode.png" alt="image">

</p>
<p>Next you&apos;ll need to install <a href="http://xquartz.macosforge.org/">XQuartz</a> by downloading the latest DMG from their site. Note that XQuratz is only needed for OS X 10.7 Mountain Lion as previous versions of OS X, comes with XQuartz pre-installed.

</p>
<p>Finally install the <a href="http://mxcl.github.com/homebrew/">Homebrew</a> package manager by running the following line in your the terminal:

</p>
<pre class="language-javascript"><code class="language-clike">

    ruby -e &quot;$(curl -fsSkL raw.github.com/mxcl/homebrew/go)&quot;

</code></pre>

<p>Homebrew will be used to install the remaining dependancies, libjpeg, pcre, libxml2 and mcrypt.

</p>
<p><strong>At this point, if you wish, you can simply download and run the <a href="https://github.com/RayViljoen/Mac-PHP-Update">installation script I prepared on GitHub</a>, which will take care of the remainder of the installation, including downloading the source files.</strong>

</p>
<p>Alternatively, to continue running the installation steps manually, install the dependancies via Homebrew by running:

</p>
<pre class="language-javascript"><code class="language-clike">

    brew install libjpeg pcre libxml2 mcrypt

</code></pre>

<p>Whilst Homebrew is installing these packages head over the the <a href="http://php.net/downloads.php">PHP downloads section</a> and grab a copy of the latest version of the PHP source in .tar.gz format.

</p>
<p>Extract the .tar.gz file to any temporary location, Downloads or Desktop will do, using a Mac extraction tool or simply run:

</p>
<pre class="language-javascript"><code class="language-clike">

    tar -zxvf path/to/source.tar.gz

</code></pre>

<p>Once Homebrew has finished installing all the packages without any errors and the source code has been extracted, change into the extracted source code directory by running

</p>
<pre class="language-javascript"><code class="language-clike">

    cd path/to/source

</code></pre>

<p>and configure the installation by running: <em>(probably best to copy this straight to your terminal)</em>

</p>
<pre class="language-javascript"><code class="language-clike">

    ./configure  \
    --prefix=/usr  \
    --mandir=/usr/share/man  \
    --infodir=/usr/share/info  \
    --sysconfdir=/private/etc  \
    --with-apxs2=/usr/sbin/apxs  \
    --enable-cli  \
    --with-config-file-path=/etc  \
    --with-libxml-dir=/usr  \
    --with-openssl=/usr  \
    --with-kerberos=/usr  \
    --with-zlib=/usr  \
    --enable-bcmath  \
    --with-bz2=/usr  \
    --enable-calendar  \
    --with-curl=/usr  \
    --enable-dba  \
    --enable-exif  \
    --enable-ftp  \
    --with-gd  \
    --enable-gd-native-ttf  \
    --with-icu-dir=/usr  \
    --with-iodbc=/usr  \
    --with-ldap=/usr  \
    --with-ldap-sasl=/usr  \
    --with-libedit=/usr  \
    --enable-mbstring  \
    --enable-mbregex  \
    --with-mysql=mysqlnd  \
    --with-mysqli=mysqlnd  \
    --without-pear  \
    --with-pdo-mysql=mysqlnd  \
    --with-mysql-sock=/var/mysql/mysql.sock  \
    --with-readline=/usr  \
    --enable-shmop  \
    --with-snmp=/usr  \
    --enable-soap  \
    --enable-sockets  \
    --enable-sysvmsg  \
    --enable-sysvsem  \
    --enable-sysvshm  \
    --with-tidy  \
    --enable-wddx  \
    --with-xmlrpc  \
    --with-iconv-dir=/usr  \
    --with-xsl=/usr  \
    --enable-zip  \
    --with-pcre-regex  \
    --with-pgsql=/usr  \
    --with-pdo-pgsql=/usr \
    --with-freetype-dir=/usr/X11 \
    --with-jpeg-dir=/usr  \
    --with-png-dir=/usr/X11

</code></pre>

<p>This will take a few minutes to complete and once it does you can finally build and install the source files. Note that this can take quite a long time to complete, so make sure you have an hour just to be safe. To build and install run:

</p>
<pre class="language-javascript"><code class="language-clike">

    sudo make install

</code></pre>

<p>Once the install is complete run

</p>
<pre class="language-javascript"><code class="language-clike">

    php -v

</code></pre>

<p>and if everything worked, you should now see the new PHP version 5.4.    
</p>
<br>
          <div id="disqus_thread"></div>
          <script type="text/javascript">
            //- * * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'parsedd'; //- required: replace example with your forum shortname
            
            //- Only set to dev mode if on localhost
            if(location.hostname === 'localhost') {
                var disqus_developer = 1;
            }
            
            //- * * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
          </script>
        </article>
      </div>
      <script src="/js/main.js"></script>
      <script>
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-29106812-1']);
        _gaq.push(['_trackPageview']);
        
        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      </script>
    </div>
  </body>
</html>